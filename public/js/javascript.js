function asukoht(){var e={lat:58.378202,lng:26.714864},t=new google.maps.Map(document.getElementById("map"),{zoom:17,center:e});new google.maps.Marker({position:e,animation:google.maps.Animation.BOUNCE,map:t,icon:{url:"/../public/pictures/meist/marker.png",scaledSize:new google.maps.Size(40,45)},title:"Siin me veedamegi enamuse enda ajast!"})}function checkConnection(){navigator.onLine?(document.getElementById("connectionerror").style.display="none",last?(document.getElementById("connectionestab").style.display="block",last=!1):document.getElementById("connectionestab").style.display="none"):(document.getElementById("connectionerror").style.display="block",last=!0)}function editComment(e){if(!editing.includes(e)){editing.push(e);var t=document.createElement("TEXTAREA");t.id=e,t.className="textArea";var n,o=document.getElementsByClassName("commentText");for(i=0;i<o.length;i++)o[i].id==e&&(n=o[i].textContent);var a=document.createElement("BUTTON");a.appendChild(document.createTextNode("Submit your edit")),a.id=e,a.className="submitButton",a.onclick=function(){updateComment(e)};var d=document.createTextNode(n);t.appendChild(d),document.getElementById(e).appendChild(t),document.getElementById(e).appendChild(a)}}function updateComment(e){var t,n=document.getElementsByClassName("textArea");for(i=0;i<n.length;i++)n[i].id==e&&(t=n[i].value);$.ajax({type:"POST",url:"/edit",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{type:"updateComment",commentId:e,commentText:t},datatype:"json"}),document.getElementById(e).getElementsByClassName("commentText")[0].textContent=t,document.getElementById(e).getElementsByClassName("submitButton")[0].remove(),document.getElementById(e).getElementsByClassName("textArea")[0].remove();var o=editing.indexOf(e);editing.splice(o,1)}function fetchPost(){if(navigator.onLine){var e=$(".endless-pagination").data("next-page");null!==e?($(".loading").show(),clearTimeout($.data(this,"scrollCheck")),$.data(this,"scrollCheck",setTimeout(function(){$(window).height()+$(window).scrollTop()+100>=$(document).height()&&($.get(e,function(e){$(".posts").append(e.postitus),$(".endless-pagination").data("next-page",e.next_page)}),$(".loading").hide())},350))):$(".loading").hide()}}function editPost(e,t,n){if(!editing.includes(e)){editing.push(e);var o,a=document.getElementsByClassName("edit");for(i=0;i<a.length;i++)a[i].id==e&&(o=a[i]);var d=document.createElement("DIV");d.appendChild(document.createElement("BR"));var l=document.createElement("DIV"),s=document.createElement("TEXTAREA");s.id=e,s.className="titleEdit",s.appendChild(document.createTextNode(t)),s.rows=1,s.cols=60,l.appendChild(s),d.appendChild(l),o.appendChild(d),d.appendChild(document.createElement("BR")),d.className="editDiv",d.id="editDiv";var m=document.createElement("DIV"),c=document.createElement("TEXTAREA");c.id=e,c.className="textEdit",c.appendChild(document.createTextNode(n)),c.rows=20,c.cols=60,m.appendChild(c),d.appendChild(m),d.appendChild(document.createElement("BR"));var r=document.createElement("BUTTON");r.appendChild(document.createTextNode("Update your post")),r.onclick=function(){var t=s.value,n=c.value;updatePost(e,t,n);var o=document.getElementsByTagName("h2");for(i=0;i<o.length;i++)o[i].id==e&&(o[i].textContent=t);for(o=document.getElementsByTagName("p"),i=0;i<o.length;i++)o[i].id==e&&(o[i].textContent=n);$("#editDiv").remove()},d.appendChild(r),d.appendChild(document.createElement("BR")),d.appendChild(document.createElement("BR"))}}function updatePost(e,t,n){$.ajax({type:"POST",url:"/updatePost",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e,title:t,payload:n},datatype:"json"})}function upvote(e){var t,n=document.getElementsByClassName("postRating");for(i=0;i<n.length;i++)n[i].id==e&&(t=n[i]);if(upvoted.includes(e)){var o=upvoted.indexOf(e);upvoted.splice(o,1);var a=document.getElementsByClassName("upvoteBtn");for(i=0;i<a.length;i++)if(a[i].id==e){var d=a[i];d.style.backgroundColor=""}t.textContent=parseInt(t.textContent)-1}else if(downvoted.includes(e)){var o=downvoted.indexOf(e);downvoted.splice(o,1),upvoted.push(e),t.textContent=parseInt(t.textContent)+2;var a=document.getElementsByClassName("upvoteBtn");for(i=0;i<a.length;i++)if(a[i].id==e){var d=a[i];d.style.backgroundColor="#4CAF50"}var l=document.getElementsByClassName("downvoteBtn");for(i=0;i<l.length;i++)if(l[i].id==e){var d=l[i];d.style.backgroundColor=""}}else{upvoted.push(e),t.textContent=parseInt(t.textContent)+1;var a=document.getElementsByClassName("upvoteBtn");for(i=0;i<a.length;i++)if(a[i].id==e){var d=a[i];d.style.backgroundColor="#4CAF50"}}$.ajax({type:"POST",url:"/vote",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e,vote:1},datatype:"json"})}function downvote(e){var t,n=document.getElementsByClassName("postRating");for(i=0;i<n.length;i++)n[i].id==e&&(t=n[i]);if(downvoted.includes(e)){var o=upvoted.indexOf(e);downvoted.splice(o,1);var a=document.getElementsByClassName("downvoteBtn");for(i=0;i<a.length;i++)if(a[i].id==e){var d=a[i];d.style.backgroundColor=""}t.textContent=parseInt(t.textContent)+1}else if(upvoted.includes(e)){var o=downvoted.indexOf(e);upvoted.splice(o,1),downvoted.push(e);var a=document.getElementsByClassName("downvoteBtn");for(i=0;i<a.length;i++)if(a[i].id==e){var d=a[i];d.style.backgroundColor="#f44336"}var l=document.getElementsByClassName("upvoteBtn");for(i=0;i<l.length;i++)if(l[i].id==e){var d=l[i];d.style.backgroundColor=""}t.textContent=parseInt(t.textContent)-2}else{downvoted.push(e);var a=document.getElementsByClassName("downvoteBtn");for(i=0;i<a.length;i++)if(a[i].id==e){var d=a[i];d.style.backgroundColor="#f44336"}t.textContent=parseInt(t.textContent)-1}$.ajax({type:"POST",url:"/vote",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e,vote:-1},datatype:"json"})}function getRating(e){$.ajax({type:"GET",url:"/getVotes",data:{postitusID:e},success:function(t){var n=document.getElementsByClassName("postRating");for(i=0;i<n.length;i++)n[i].id==e&&(n[i].textContent=t)}})}function getVotes(e){$.ajax({type:"GET",url:"/getVoted",data:{userid:e},success:function(e){upvoted=e[0],downvoted=e[1]}})}function initButtons(){var e=document.getElementsByClassName("upvoteBtn"),t=document.getElementsByClassName("downvoteBtn");for(i=0;i<e.length;i++)upvoted.includes(parseInt(e[i].id))&&(e[i].style.backgroundColor="#4CAF50");for(i=0;i<t.length;i++)downvoted.includes(parseInt(t[i].id))&&(t[i].style.backgroundColor="#f44336")}